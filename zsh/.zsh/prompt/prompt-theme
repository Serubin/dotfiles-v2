# Prompt Theme - Pure
# Based on https://github.com/sindresorhus/pure

# Git Prompt Info
git_color_clean=$Black # Clean working directory
git_clean_prefix=""
git_clean_suffix=""

git_color_dirty=$Red # Dirty working directory
git_dirty_prefix=""
git_dirty_suffix="*"


PromptSymbol="❯"

# pre_cmd updating
function pre_cmd() {
    local exit="$?"
    local pre_prompt_user=""

    # Term Title
    Title="$User $PathShort"

    # Title and prompt for ssh connections
    [[ "$SSH_CONNECTION" != '' ]] && Title="$User@$HostName $ShortPath"

    [[ "$SSH_CONNECTION" != '' ]] && pre_prompt_user="$BBlue$User@$HostName "

    # User for root
    [[ $UID -eq 0 ]] && pre_prompt_user="$BBlue$User "

    local git=`git_stat`

    # Formatting
    local preprompt_format="$pre_prompt_user$BCyan$PathShort $git"

    # ZSH - So simple!
    print -P $preprompt_format


    # iTerm Touch Bar
    # TODO @Solomon: Remove this, touch bars are deprecated
    local iterm_message=$(git rev-parse --abbrev-ref HEAD 2> /dev/null; [[ $? -ne 0 ]] && echo "No Repo")
    it2setkeylabel set status $iterm_message 2> /dev/null
}

# ZSH
# Prompt - Should be last
prompt_format="%(?.$Purple.$Red)$PromptSymbol $BWhite"
